#! /usr/bin/env bash
conf_copy=~/.config/paru/pacman.conf
cp /etc/pacman.conf "${conf_copy}" || { echo "stow paru first" >&2; exit 1; }
sed -i "s;# %PARU_PACMAN_CONF%;PacmanConf = ${conf_copy};" ~/.config/paru/paru.conf

if ! grep -q '^ILoveCandy' "${conf_copy}"
then
	sed -i 's/^\[options\]$/&\
ILoveCandy/' "${conf_copy}"
fi

uncomment() {
	if grep -q "^#$1\$" "${conf_copy}"; then
		sed -i "s/^#$1\$/$1/" "${conf_copy}"
	fi
}

uncomment Color
uncomment VerbosePkgLists
uncomment "ParallelDownloads = 5"

echo "if you want to, copy '${conf_copy}' to '/etc/pacman.conf'"
